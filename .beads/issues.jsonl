{"id":"d3-item-salvager-30t","title":"Add tests for slot removal and usage chips","description":"Add unit and integration tests validating slot header removal, preserved data-item-slot attribute, per-context usage chips with classes, and that slot-based filtering continues to work. Add a Playwright smoke test asserting chips have expected classes.","design":"Update tests: frontend/tests/unit/test_item_row.py to assert chips/classes and text; update frontend/tests/unit/test_table_behaviors.py or create new tests for header absence; add Playwright test to check chip classes visually.","acceptance_criteria":"Given the test suite runs, When the change is implemented, Then unit and integration tests cover the behavior and CI passes.","notes":"Link to UI task: d3-item-salvager-9yd","status":"open","priority":2,"issue_type":"task","owner":"czer323@gmail.com","estimated_minutes":120,"created_at":"2026-01-13T21:08:42.1672796-05:00","created_by":"czer323","updated_at":"2026-01-13T21:08:42.1672796-05:00","labels":["testing"]}
{"id":"d3-item-salvager-6pj","title":"test","status":"closed","priority":2,"issue_type":"task","owner":"czer323@gmail.com","created_at":"2026-01-13T15:19:18.0862119-05:00","created_by":"czer323","updated_at":"2026-01-13T15:39:21.0743131-05:00","closed_at":"2026-01-13T15:39:21.0743131-05:00"}
{"id":"d3-item-salvager-860","title":"Show item name with color indicating set vs legendary in item lists","description":"Display only the item name and visually distinguish set items (green) from regular legendary items (orange). Ensure backend includes quality in item payloads and frontend adds quality-based CSS classes; hide internal IDs like P4_Unique_* from visible labels.","design":"Backend: return item.quality in nested payloads. Frontend: add sanitized class quality-{value} to item name; map set-\u003egreen, legendary-\u003eorange; update templates and components; reuse existing tokens for colors.","acceptance_criteria":"Given an item with quality set, When the item list is rendered, Then the name element has class quality-set and appears green.\n\nGiven an item with quality legendary, When the item list is rendered, Then the name element has class quality-legendary and appears orange.\n\nGiven an item name containing internal ID suffixes (e.g., P4_Unique_*), When rendered, Then the visible label only shows the human-friendly name.","notes":"Add unit tests for API and frontend template/component tests; consider a small migration/backfill if data lacks quality values.","status":"open","priority":2,"issue_type":"task","owner":"czer323@gmail.com","estimated_minutes":180,"created_at":"2026-01-13T20:47:43.3251807-05:00","created_by":"czer323","updated_at":"2026-01-13T20:51:36.7473652-05:00","labels":["ux"]}
{"id":"d3-item-salvager-9yd","title":"Remove Slot column and add colored usage chips in item lists","description":"Remove the visible Slot column from item usage tables but keep the data-item-slot attribute for filtering. Replace the per-row 'Used' badge and usage_label with per-context chips (Main, Follower, Kanai) using classes usage-main, usage-follower, usage-kanai.","design":"Update templates (frontend/templates/items/summary.html and frontend/templates/item_row.html) to render chips; update frontend/static/js/item_list.js for client-side rendering; add CSS classes in frontend/static/css/components.css and reuse accessible color tokens; ensure ARIA/accessibility.","acceptance_criteria":"Given the item usage table is rendered, When viewing rows, Then the Slot column is not visible but each row retains a data-item-slot attribute for filtering.\\n\\nGiven items have usage contexts, When rendered, Then each usage context is displayed as a chip with class usage-main, usage-follower or usage-kanai and readable text (Main / Follower / Kanai).\\n\\nGiven the item list is filtered by slot, When applying a slot filter, Then filtering still works using the preserved data-item-slot attribute.","notes":"Related issue: d3-item-salvager-860. Update unit and Playwright tests to cover behavior.","status":"open","priority":2,"issue_type":"task","owner":"czer323@gmail.com","estimated_minutes":240,"created_at":"2026-01-13T21:08:35.5531657-05:00","created_by":"czer323","updated_at":"2026-01-13T21:08:35.5531657-05:00","labels":["ux"]}
{"id":"d3-item-salvager-be1","title":"Add docs: reset DB runbook and safety instructions","description":"Document the backup -\u003e cleanup -\u003e import workflow and safety precautions (do not run on production DB). Include example commands and explain how to recover from backups. Add entry to docs/ and README.md.","design":"Add docs/reset_local_db.md with step-by-step commands; add note to README about local DB cleanup; reference the reset script at scripts/reset_local_db.py and package entrypoint.","acceptance_criteria":"- [ ] docs/reset_local_db.md added with steps and examples.\n- [ ] README updated with link to runbook and warnings.\n- [ ] Issue d3-item-salvager-okk references the docs.","notes":"Related: d3-item-salvager-okk. This is for documentation only; implementation already added as part of d3-item-salvager-okk.1.","status":"open","priority":2,"issue_type":"task","owner":"czer323@gmail.com","created_at":"2026-01-13T15:56:11.0300411-05:00","created_by":"czer323","updated_at":"2026-01-13T15:56:11.0300411-05:00"}
{"id":"d3-item-salvager-okk","title":"Fix: local DB corrupted — mixed class items in builds; remove \u0026 repopulate builds","description":"Problem: Local development DB contains corrupted build data: different class items are appended into other builds, causing test failures and unreliable imports. Default DB: d3_items.db. Importers found: python -m d3_item_salvager.scripts.import_guides and python -m d3_item_salvager.utility.load_reference_data. Note: Alembic migrations are not present in repo (migration risk).\n\n## Steps to Reproduce\n1. Run python -m d3_item_salvager.scripts.import_guides against local DB (d3_items.db).\n2. Query builds and related items using sqlite3 or a Python session and look for items attached to unexpected builds.\n3. Observe cross-class mixing: items with different class IDs attached to the same build.","design":"Backup DB; validate cleanup on a copy; recommended: drop and recreate schema using SQLModel.metadata.drop_all/create_all via Container engine; alternative: granular DELETEs in FK-safe order. Repopulate using importer scripts and add an automated script to run backup -\u003e cleanup -\u003e import.","acceptance_criteria":"## Acceptance Criteria\n- [ ] Backup file created (d3_items.db.bak) and SQL dump saved.\n- [ ] Cleanup + import executed successfully with the recommended script.\n- [ ] Builds table contains only imported builds and no cross-class mixing.\n- [ ] Integration tests pass: pytest tests/integration/test_builds_items.py","notes":"WORK COMPLETE (local): Ran reset script against local DB with confirm. Created backups/backups/d3_items.db.bak and backups/d3_items.db.sql. Recreated schema and repopulated via importers. Verified by running integration tests: tests/integration/test_builds_items.py and tests/integration/test_reset_local_db.py — all passing. No commits/pushes made. Next: prepare PR with changes and tests; will wait for your approval before committing and opening PR.","status":"in_progress","priority":1,"issue_type":"bug","owner":"czer323@gmail.com","estimated_minutes":120,"created_at":"2026-01-13T15:36:31.5075701-05:00","created_by":"czer323","updated_at":"2026-01-13T15:55:55.9405224-05:00","labels":["testing","tooling"]}
{"id":"d3-item-salvager-okk.1","title":"Implement reset \u0026 repopulation script (local dev)","description":"Create  to back up DB (copy + dump), perform safe cleanup (drop/create or granular delete), and run importers to repopulate. Must support , , , and  flags and log actions. Tests and docs required.","design":"Use Container().engine() for engine; use SQLModel.metadata.drop_all/create_all; call importers  and ; ensure script refuses to run against non-dev DBs unless explicit flag set.","acceptance_criteria":"- [ ] Script exists at  and supports flags.\n- [ ] Backup created and SQL dump saved.\n- [ ] Running script on test copy recreates schema and imports builds without cross-class mixing.\n- [ ] Integration tests added and passing.","notes":"Implemented reset script and integration tests; ran the script against local DB with confirm: backups created at backups/d3_items.db.bak and SQL dump at backups/d3_items.db.sql. Integration tests (including tests/integration/test_builds_items.py) pass locally. No commits pushed; preparing PR after your review.","status":"closed","priority":1,"issue_type":"task","owner":"czer323@gmail.com","estimated_minutes":180,"created_at":"2026-01-13T15:44:17.2263834-05:00","created_by":"czer323","updated_at":"2026-01-13T15:55:49.3291616-05:00","closed_at":"2026-01-13T15:55:49.3291616-05:00","labels":["testing","tooling"],"dependencies":[{"issue_id":"d3-item-salvager-okk.1","depends_on_id":"d3-item-salvager-okk","type":"parent-child","created_at":"2026-01-13T15:44:17.2376795-05:00","created_by":"czer323"}]}
{"id":"d3-item-salvager-ply","title":"Add DB migrations (Alembic) and migration workflow","description":"Repository currently lacks Alembic migrations; add Alembic (or compatible migration tool), generate initial migrations from current models, and add CI/automation to ensure schema migrations are applied and tested.","design":"Add Alembic to repo; configure env and alembic.ini to target development DATABASE_URL; autogenerate initial migration from SQLModel metadata; add migration test that creates a fresh DB, runs alembic upgrade head, and verifies expected tables exist; add a reset script and docs.","acceptance_criteria":"## Acceptance Criteria\n- [ ] Alembic or compatible migrations added to repo and checked into source control.\n- [ ] Running alembic upgrade head on a fresh DB produces the expected tables (matches models).\n- [ ] CI includes a migration test that runs migrations against a fresh DB and validates schema.\n- [ ] A documented reset script exists for local dev that recreates the DB and imports reference data.","notes":"Related bug: d3-item-salvager-okk; ensure migration work includes docs for local cleanup/repopulation and sample commands: sqlite3 .dump, python -m d3_item_salvager.scripts.import_guides.","status":"open","priority":2,"issue_type":"task","owner":"czer323@gmail.com","estimated_minutes":240,"created_at":"2026-01-13T15:36:53.3865052-05:00","created_by":"czer323","updated_at":"2026-01-13T15:40:52.1242902-05:00","labels":["tooling"],"dependencies":[{"issue_id":"d3-item-salvager-ply","depends_on_id":"d3-item-salvager-okk","type":"discovered-from","created_at":"2026-01-13T15:36:53.3923617-05:00","created_by":"czer323"}]}
