{% macro render_select_field(label, name, options, element_id, data_testid, hx_url, hx_target, indicator_id,
include_selector="#selection-form") -%}
<label class="form-control w-full">
    <div class="label">
        <span class="label-text font-medium">{{ label }}</span>
        {% if options %}
        <span class="label-text-alt text-xs text-base-content/70">{{ options|length }} options</span>
        {% endif %}
    </div>
    <select class="select select-bordered w-full" name="{{ name }}" id="{{ element_id }}"
        data-testid="{{ data_testid }}" {% if not options %}disabled{% endif %} hx-get="{{ hx_url }}"
        hx-target="{{ hx_target }}" hx-trigger="change" hx-include="{{ include_selector }}"
        hx-indicator="{{ indicator_id }}" hx-push-url="true">
        {% if not options %}
        <option value="" selected>No options available</option>
        {% else %}
        {% for option in options %}
        <option value="{{ option.id }}" {% if option.selected %}selected{% endif %}>{{ option.label }}</option>
        {% endfor %}
        {% endif %}
    </select>
</label>
{%- endmacro %}
