<div class="rounded-lg border border-base-300 bg-base-100/80 p-4" data-testid="item-filter-controls"
    data-filter-controls data-lookup-url="{{ frontend_config.backend_base_url }}/items/lookup">
    <div class="flex flex-col gap-4 md:flex-row md:items-end">
        <label class="form-control w-full md:flex-1">
            <span class="label-text text-sm font-semibold">Search items</span>
            <input type="search" class="input input-bordered" name="search" placeholder="Search by name"
                value="{{ summary.filters.search }}" maxlength="80" data-testid="item-filter-search" data-filter-search
                autocomplete="off" />
            <span class="label-text-alt text-xs">Supports partial and fuzzy matching.</span>

            <p class="mt-2 text-sm text-base-content/60" data-testid="search-status" aria-live="polite" hidden></p>
        </label>
        <label class="form-control w-full md:w-52">
            <span class="label-text text-sm font-semibold">Slot filter</span>
            <select class="select select-bordered" name="slot" data-testid="item-slot-filter" data-filter-slot>
                <option value="" {% if not summary.filters.slot %}selected{% endif %}>All slots</option>
                {% for slot in summary.available_slots %}
                <option value="{{ slot }}" {% if summary.filters.slot and slot|lower==summary.filters.slot|lower
                    %}selected{% endif %}>{{ slot }}</option>
                {% endfor %}
            </select>
            <span class="label-text-alt text-xs">Select a slot to narrow results.</span>
        </label>

        <label class="form-control w-full md:w-80">
            <span class="label-text text-sm font-semibold">Usage</span>
            <div class="flex gap-2 items-center" aria-label="Usage filters" role="group">
                <label class="cursor-pointer"><input type="checkbox" data-filter-usage value="main"> <span
                        class="ml-2">Main</span></label>
                <label class="cursor-pointer"><input type="checkbox" data-filter-usage value="follower"> <span
                        class="ml-2">Follower</span></label>
                <label class="cursor-pointer"><input type="checkbox" data-filter-usage value="kanai"> <span
                        class="ml-2">Kanai</span></label>
            </div>
            <span class="label-text-alt text-xs">Toggle usage contexts to filter the list client-side.</span>
        </label>

        <label class="form-control w-full md:w-64">
            <span class="label-text text-sm font-semibold">Class filter</span>
            <select class="select select-bordered" multiple name="class_ids" data-testid="item-class-filter"
                data-filter-classes>
                {% for cls in summary.available_classes %}
                <option value="{{ cls }}" {% if cls in summary.selected_class_ids %}selected{% endif %}>{{ cls }}
                </option>
                {% endfor %}
            </select>
            <span class="label-text-alt text-xs">Select one or more classes to filter by class usage
                (client-side).</span>
        </label>
        <button type="button" class="btn btn-ghost md:w-auto" data-testid="item-filter-clear" data-filter-clear>
            Clear filters
        </button>
    </div>
</div>
