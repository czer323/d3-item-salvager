{% from "variants/sections.html" import render_item_section %}

{% if summary_error %}
{% set title = "Unable to load summary" %}
{% set message = summary_error %}
{% include "components/error_state.html" %}
{% endif %}

{% if summary %}
<div class="space-y-6" data-testid="variant-summary">
    <header class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-2xl font-semibold">Variant Summary</h1>
            <p class="text-sm opacity-80">
                Showing results for <span class="font-medium">{{ summary.variant.name }}</span>.
            </p>
        </div>
        <span class="badge badge-neutral">Guide: {{ summary.variant.build_guide_id }}</span>
    </header>

    {{ render_item_section(
    "Used by selected builds",
    summary.used_items,
    "variant-summary-used",
    "No items are currently marked as required for the selected variants.",
    ) }}

    {{ render_item_section(
    "Not used / Salvage candidates",
    summary.salvage_items,
    "variant-summary-salvage",
    "No salvage recommendations were generated for this selection.",
    ) }}
</div>
{% else %}
<div class="rounded-lg border border-dashed border-base-300 bg-base-100/60 p-6 text-sm">
    Variant summary data is not available yet. Select a variant once data is loaded.
</div>
{% endif %}
