{% extends "layout/base.html" %}

{% block title %}{{ page_title or "D3 Item Salvager" }}{% endblock %}

{% block body %}
<section class="space-y-6">
    <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-3xl font-semibold">D3 Item Salvager</h1>
            <p class="text-sm opacity-80">
                Explore build requirements and salvage recommendations for the items in your selected builds.
            </p>
        </div>
        <div class="rounded-lg border border-base-300 bg-base-100/80 px-4 py-3 text-sm">
            <p>
                Backend: <span class="font-mono">{{ frontend_config.backend_base_url }}</span>
            </p>
            <p>
                Timeout: {{ frontend_config.request_timeout_seconds }}s
            </p>
        </div>
    </div>

    {% with prefetch_items=False %}
    {% include "selection_panel.html" %}
    {% endwith %}

    <div class="space-y-3">
        <div id="item-summary-indicator" class="htmx-indicator">
            {% include "components/loading_spinner.html" %}
        </div>
        <div id="item-summary-content">
            {% set table = item_table if item_table is defined else None %}
            {% set table_error = item_table_error if table_error is defined else None %}
            {% include "items/summary.html" %}
        </div>
    </div>
</section>
{% include "selection/preferences_modal.html" %}
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/selection.js') }}" defer></script>
<script src="{{ url_for('static', filename='js/item_list.js') }}" defer></script>
<script src="{{ url_for('static', filename='js/search.js') }}" defer></script>
{% endblock %}
